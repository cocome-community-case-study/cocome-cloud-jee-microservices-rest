<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">
<h:head>

	<script>
		window.addEventListener('message', receiveMessage, false);
		

		function receiveMessage(event) {
			//check for origin
			if (event.data == 'logout') {

				document.getElementById('logoutId:logout').click();

				
			}else{
				var user = JSON.parse(event.data);
				//alert('Hallo');
				document.getElementById('formId:inputId').value = user.userName;
				document.getElementById('formId:buttonId').click();
			}

		}

		//window.onload = storeValues();

		function storeValues() {
			document.getElementById('formId').submit();
			//document.formId.submit();

		}
	</script>

</h:head>

<h:body>

	
	
		
			This is StoreFrontend!
	<h:form id="formId" name="formId">
		<h:inputText id="inputId" value="#{userInformation.username}" />
		<h:commandButton id="buttonId" value="Reset"
			action="#{userInformation.processUIInput}">

			<f:ajax execute="@form" render="result" />

		</h:commandButton>

	</h:form>

	

	<h:panelGroup id="result">Logged in LoginUser #{userInformation.output}</h:panelGroup>
	
	
		
	<h:form id="logoutId" name="logoutId">
		
		<h:commandButton id="logout" value="Reset"
			action="#{userInformation.logout}">

			<f:ajax execute="@form" render="result" />

		</h:commandButton>

	</h:form>








</h:body>

</html>