<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">
<h:head>

	<script>
		window.addEventListener('message', receiveMessage, false);

		function receiveMessage(event) {
			//check for origin

			
			
			document.getElementById('logoutId:logout').click(); //reset Session

			document.getElementById('inputForm:user').value = event.data;
			
		
			document.getElementById('inputForm:processInputButton').click(); //process user input

		}
	</script>

</h:head>

<h:body>

	
	
		
			This is StoreFrontend!
	<h:form id="inputForm" name="inputForm">
		<h:inputHidden id="user" value="#{userInformation.userAsJSON}" />
		
		<h:commandButton id="processInputButton" value="Reset"
			action="#{userInformation.processUIInput}">

			<f:ajax execute="@form" render="result" />

		</h:commandButton>

	</h:form>



	<h:panelGroup id="result">
		<div>Logged in LoginUser #{userInformation.userPOJO.username}</div>
		<div>Logged in LoginUser #{userInformation.userPOJO.permissions}</div>

		

	</h:panelGroup>




	<h:form id="logoutId" name="logoutId">

		<h:commandButton id="logout" value="Reset"
			action="#{userInformation.logout}">

			<f:ajax execute="@form" render="result" />

		</h:commandButton>

	</h:form>








</h:body>

</html>